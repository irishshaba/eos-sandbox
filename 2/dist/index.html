<html>
    <head>
        <title>Block.one dev test - Problem 2</title>
        <style>
            textarea {
                width: 600px;
                height: 200px;
                border: 1px solid black;
                background-color: silver;
                font-family: verdana;
                color: black;
                font-size: 12px;
            }
        </style>
    </head>
    <body>
        <form>
            <input type="button" value="Do the Thing" onClick="fetch()" />
        </form>
        <textarea id="results" disabled></textarea>
    </body>

    <script>
        function fetch() {
            var myRequest = new XMLHttpRequest();
            myRequest.open('GET', 'http://localhost:8081/graphql?query={latest{blockId transactionCount}}', true);
            myRequest.onreadystatechange = function () {                 
                if (myRequest.readyState === 4) {
                    document.getElementById('results').value = JSON.stringify(JSON.parse(myRequest.responseText), null, 2);
                }
            };       
            
            myRequest.send()
            
        }
    </script>
</html>